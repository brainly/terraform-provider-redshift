---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "redshift_schema Resource - terraform-provider-redshift"
subcategory: ""
description: |-
  A database contains one or more named schemas. Each schema in a database contains tables and other kinds of named objects. By default, a database has a single schema, which is named PUBLIC. You can use schemas to group database objects under a common name. Schemas are similar to file system directories, except that schemas cannot be nested.
---

# redshift_schema (Resource)

A database contains one or more named schemas. Each schema in a database contains tables and other kinds of named objects. By default, a database has a single schema, which is named PUBLIC. You can use schemas to group database objects under a common name. Schemas are similar to file system directories, except that schemas cannot be nested.

## Example Usage

```terraform
resource "redshift_user" "owner" {
  name = "owner"
}

# Internal schema
resource "redshift_schema" "schema" {
  name  = "my_schema"
  owner = redshift_user.owner.name
  quota = 150
}

# External schema using AWS Glue Data Catalog
resource "redshift_schema" "external_from_glue_data_catalog" {
  name = "spectrum_schema"
  owner = redshift_user.owner.name
  external_schema {
    database_name = "spectrum_db" # Required. Name of the db in glue catalog
    data_catalog_source {
      region = "us-west-2" # Optional. If not specified, Redshift will use the same region as the cluster.
      iam_role_arns = [
        # Required. Must be at least 1 ARN and not more than 10.
        "arn:aws:iam::123456789012:role/myRedshiftRole",
        "arn:aws:iam::123456789012:role/myS3Role",
      ]
      catalog_role_arns = [
        # Optional. If specified, must be at least 1 ARN and not more than 10.
        # If not specified, Redshift will use iam_role_arns for accessing the glue data catalog.
        "arn:aws:iam::123456789012:role/myAthenaRole",
        # ...
      ]
      create_external_database_if_not_exists = true # Optional. Defaults to false.
    }
  }
}

# External schema using Hive Metastore
resource "redshift_schema" "external_from_hive_metastore" {
  name = "hive_schema"
  owner = redshift_user.owner.name
  external_schema {
    database_name = "hive_db" # Required. Name of the db in hive metastore
    hive_metastore_source {
      hostname = "172.10.10.10" # Required
      port = 99 # Optional. Default is 9083
      iam_role_arns = [
        # Required. Must be at least 1 ARN and not more than 10.
        "arn:aws:iam::123456789012:role/MySpectrumRole",
      ]
    }
  }
}

# External schema using federated query from RDS/Aurora Postgres
resource "redshift_schema" "external_from_postgres" {
  name = "myRedshiftPostgresSchema"
  owner = redshift_user.owner.name
  external_schema {
    database_name = "my_aurora_db" # Required. Name of the db in postgres
    rds_postgres_source {
      hostname = "endpoint to aurora hostname" # Required
      port = 5432 # Optional. Default is 5432
      schema = "my_aurora_schema" # Optional, default is "public"
      iam_role_arns = [
        # Required. Must be at least 1 ARN and not more than 10.
        "arn:aws:iam::123456789012:role/MyAuroraRole",
        # ...
      ]
      secret_arn = "arn:aws:secretsmanager:us-east-2:123456789012:secret:development/MyTestDatabase-AbCdEf" # Required
    }
  }
}

# External schema using federated query from RDS/Aurora MySQL
resource "redshift_schema" "external_from_mysql" {
  name = "myRedshiftMysqlSchema"
  owner = redshift_user.owner.name
  external_schema {
    database_name = "my_aurora_db" # Required. Name of the db in mysql
    rds_mysql_source {
      hostname = "endpoint to aurora hostname" # Required
      port = 3306 # Optional. Default is 3306
      iam_role_arns = [
        # Required. Must be at least 1 ARN and not more than 10.
        "arn:aws:iam::123456789012:role/MyAuroraRole",
        # ...
      ]
      secret_arn = "arn:aws:secretsmanager:us-east-2:123456789012:secret:development/MyTestDatabase-AbCdEf" # Required
    }
  }
}

# External schema using federated query from Redshift data share database
resource "redshift" "external_from_redshift" {
  name = "Sales_schema"
  owner = redshift_user.owner.name
  external_schema {
    database_name = "Sales_db" # Required. Name of the datashare db
    redshift_source {
      schema = "public" # Optional. Name of the schema in the datashare db. Default is "public"
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **name** (String) Name of the schema. The schema name can't be `PUBLIC`.

### Optional

- **cascade_on_delete** (Boolean) Indicates to automatically drop all objects in the schema. The default action is TO NOT drop a schema if it contains any objects.
- **external_schema** (Block List, Max: 1) Configures the schema as an external schema. See https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_EXTERNAL_SCHEMA.html (see [below for nested schema](#nestedblock--external_schema))
- **id** (String) The ID of this resource.
- **owner** (String) Name of the schema owner.
- **quota** (Number) The maximum amount of disk space that the specified schema can use. GB is the default unit of measurement.

<a id="nestedblock--external_schema"></a>
### Nested Schema for `external_schema`

Required:

- **database_name** (String) The database where the external schema can be found

Optional:

- **data_catalog_source** (Block List, Max: 1) Configures the external schema from the AWS Glue Data Catalog (see [below for nested schema](#nestedblock--external_schema--data_catalog_source))
- **hive_metastore_source** (Block List, Max: 1) Configures the external schema from a Hive Metastore. (see [below for nested schema](#nestedblock--external_schema--hive_metastore_source))
- **rds_mysql_source** (Block List, Max: 1) Configures the external schema to reference data using a federated query to RDS MYSQL or Aurora MySQL. (see [below for nested schema](#nestedblock--external_schema--rds_mysql_source))
- **rds_postgres_source** (Block List, Max: 1) Configures the external schema to reference data using a federated query to RDS POSTGRES or Aurora PostgreSQL. (see [below for nested schema](#nestedblock--external_schema--rds_postgres_source))
- **redshift_source** (Block List, Max: 1) Configures the external schema to reference datashare database. (see [below for nested schema](#nestedblock--external_schema--redshift_source))

<a id="nestedblock--external_schema--data_catalog_source"></a>
### Nested Schema for `external_schema.data_catalog_source`

Required:

- **iam_role_arns** (List of String) The Amazon Resource Name (ARN) for the IAM roles that your cluster uses for authentication and authorization.
	As a minimum, the IAM roles must have permission to perform a LIST operation on the Amazon S3 bucket to be accessed and a GET operation on the Amazon S3 objects the bucket contains.
  If the external database is defined in an Amazon Athena data catalog or the AWS Glue Data Catalog, the IAM role must have permission to access Athena unless catalog_role is specified.
  For more information, see https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-iam-policies.html.

  When you attach a role to your cluster, your cluster can assume that role to access Amazon S3, Athena, and AWS Glue on your behalf.
  If a role attached to your cluster doesn't have access to the necessary resources, you can chain another role, possibly belonging to another account.
	Your cluster then temporarily assumes the chained role to access the data. You can also grant cross-account access by chaining roles.
	You can chain a maximum of 10 roles. Each role in the chain assumes the next role in the chain, until the cluster assumes the role at the end of chain.

  To chain roles, you establish a trust relationship between the roles. A role that assumes another role must have a permissions policy that allows it to assume the specified role.
	In turn, the role that passes permissions must have a trust policy that allows it to pass its permissions to another role.
	For more information, see https://docs.aws.amazon.com/redshift/latest/mgmt/authorizing-redshift-service.html#authorizing-redshift-service-chaining-roles

Optional:

- **catalog_role_arns** (List of String) The Amazon Resource Name (ARN) for the IAM roles that your cluster uses for authentication and authorization for the data catalog.
	If this is not specified, Amazon Redshift uses the specified iam_role_arns. The catalog role must have permission to access the Data Catalog in AWS Glue or Athena.
	For more information, see https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-iam-policies.html.

  To chain roles, you establish a trust relationship between the roles. A role that assumes another role must have a permissions policy that allows it to assume the specified role.
	In turn, the role that passes permissions must have a trust policy that allows it to pass its permissions to another role.
	For more information, see https://docs.aws.amazon.com/redshift/latest/mgmt/authorizing-redshift-service.html#authorizing-redshift-service-chaining-roles
- **create_external_database_if_not_exists** (Boolean) When enabled, creates an external database with the name specified by the database argument,
	if the specified external database doesn't exist. If the specified external database exists, the command makes no changes.
	In this case, the command returns a message that the external database exists, rather than terminating with an error.

  To use create_external_database_if_not_exists with a Data Catalog enabled for AWS Lake Formation, you need CREATE_DATABASE permission on the Data Catalog.
- **region** (String) If the external database is defined in an Athena data catalog or the AWS Glue Data Catalog, the AWS Region in which the database is located. This parameter is required if the database is defined in an external Data Catalog.


<a id="nestedblock--external_schema--hive_metastore_source"></a>
### Nested Schema for `external_schema.hive_metastore_source`

Required:

- **hostname** (String) The hostname of the hive metastore database.
- **iam_role_arns** (List of String) The Amazon Resource Name (ARN) for the IAM roles that your cluster uses for authentication and authorization.
	As a minimum, the IAM roles must have permission to perform a LIST operation on the Amazon S3 bucket to be accessed and a GET operation on the Amazon S3 objects the bucket contains.
	If the external database is defined in an Amazon Athena data catalog or the AWS Glue Data Catalog, the IAM role must have permission to access Athena unless catalog_role is specified.
	For more information, see https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-iam-policies.html.

  When you attach a role to your cluster, your cluster can assume that role to access Amazon S3, Athena, and AWS Glue on your behalf.
	If a role attached to your cluster doesn't have access to the necessary resources, you can chain another role, possibly belonging to another account.
	Your cluster then temporarily assumes the chained role to access the data. You can also grant cross-account access by chaining roles.
	You can chain a maximum of 10 roles. Each role in the chain assumes the next role in the chain, until the cluster assumes the role at the end of chain.

  To chain roles, you establish a trust relationship between the roles. A role that assumes another role must have a permissions policy that allows it to assume the specified role.
	In turn, the role that passes permissions must have a trust policy that allows it to pass its permissions to another role.
	For more information, see https://docs.aws.amazon.com/redshift/latest/mgmt/authorizing-redshift-service.html#authorizing-redshift-service-chaining-roles

Optional:

- **port** (Number) The port number of the hive metastore. The default port number is 9083.


<a id="nestedblock--external_schema--rds_mysql_source"></a>
### Nested Schema for `external_schema.rds_mysql_source`

Required:

- **hostname** (String) The hostname of the head node of the MySQL database replica set.
- **iam_role_arns** (List of String) The Amazon Resource Name (ARN) for the IAM roles that your cluster uses for authentication and authorization.
	As a minimum, the IAM roles must have permission to perform a LIST operation on the Amazon S3 bucket to be accessed and a GET operation on the Amazon S3 objects the bucket contains.
	If the external database is defined in an Amazon Athena data catalog or the AWS Glue Data Catalog, the IAM role must have permission to access Athena unless catalog_role is specified.
	For more information, see https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-iam-policies.html.

  When you attach a role to your cluster, your cluster can assume that role to access Amazon S3, Athena, and AWS Glue on your behalf.
	If a role attached to your cluster doesn't have access to the necessary resources, you can chain another role, possibly belonging to another account.
	Your cluster then temporarily assumes the chained role to access the data. You can also grant cross-account access by chaining roles.
	You can chain a maximum of 10 roles. Each role in the chain assumes the next role in the chain, until the cluster assumes the role at the end of chain.

  To chain roles, you establish a trust relationship between the roles. A role that assumes another role must have a permissions policy that allows it to assume the specified role.
	In turn, the role that passes permissions must have a trust policy that allows it to pass its permissions to another role.
	For more information, see https://docs.aws.amazon.com/redshift/latest/mgmt/authorizing-redshift-service.html#authorizing-redshift-service-chaining-roles
- **secret_arn** (String) The Amazon Resource Name (ARN) of a supported MySQL database engine secret created using AWS Secrets Manager.
	For information about how to create and retrieve an ARN for a secret, see https://docs.aws.amazon.com/secretsmanager/latest/userguide/manage_create-basic-secret.html
	and https://docs.aws.amazon.com/secretsmanager/latest/userguide/manage_retrieve-secret.html in the AWS Secrets Manager User Guide.

Optional:

- **port** (Number) The port number of the MySQL database. The default port number is 3306.


<a id="nestedblock--external_schema--rds_postgres_source"></a>
### Nested Schema for `external_schema.rds_postgres_source`

Required:

- **hostname** (String) The hostname of the head node of the PostgreSQL database replica set.
- **iam_role_arns** (List of String) The Amazon Resource Name (ARN) for the IAM roles that your cluster uses for authentication and authorization.
	As a minimum, the IAM roles must have permission to perform a LIST operation on the Amazon S3 bucket to be accessed and a GET operation on the Amazon S3 objects the bucket contains.
	If the external database is defined in an Amazon Athena data catalog or the AWS Glue Data Catalog, the IAM role must have permission to access Athena unless catalog_role is specified.
	For more information, see https://docs.aws.amazon.com/redshift/latest/dg/c-spectrum-iam-policies.html.

  When you attach a role to your cluster, your cluster can assume that role to access Amazon S3, Athena, and AWS Glue on your behalf.
	If a role attached to your cluster doesn't have access to the necessary resources, you can chain another role, possibly belonging to another account.
	Your cluster then temporarily assumes the chained role to access the data. You can also grant cross-account access by chaining roles.
	You can chain a maximum of 10 roles. Each role in the chain assumes the next role in the chain, until the cluster assumes the role at the end of chain.

  To chain roles, you establish a trust relationship between the roles. A role that assumes another role must have a permissions policy that allows it to assume the specified role.
	In turn, the role that passes permissions must have a trust policy that allows it to pass its permissions to another role.
	For more information, see https://docs.aws.amazon.com/redshift/latest/mgmt/authorizing-redshift-service.html#authorizing-redshift-service-chaining-roles
- **secret_arn** (String) The Amazon Resource Name (ARN) of a supported PostgreSQL database engine secret created using AWS Secrets Manager.
	For information about how to create and retrieve an ARN for a secret, see https://docs.aws.amazon.com/secretsmanager/latest/userguide/manage_create-basic-secret.html
	and https://docs.aws.amazon.com/secretsmanager/latest/userguide/manage_retrieve-secret.html in the AWS Secrets Manager User Guide.

Optional:

- **port** (Number) The port number of the PostgreSQL database. The default port number is 5432.
- **schema** (String) The name of the PostgreSQL schema. The default schema is 'public'


<a id="nestedblock--external_schema--redshift_source"></a>
### Nested Schema for `external_schema.redshift_source`

Optional:

- **schema** (String) The name of the datashare schema. The default schema is 'public'.

## Import

Import is supported using the following syntax:

```shell
# Import schema with oid: SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = 'myschema';

terraform import redshift_schema.myschema 234
```
